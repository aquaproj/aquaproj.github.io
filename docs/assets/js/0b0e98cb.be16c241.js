"use strict";(globalThis.webpackChunkaqua_docusaurus=globalThis.webpackChunkaqua_docusaurus||[]).push([[8492],{1263:(e,a,n)=>{n.r(a),n.d(a,{assets:()=>s,contentTitle:()=>u,default:()=>m,frontMatter:()=>o,metadata:()=>i,toc:()=>c});var t=n(8168),r=(n(6540),n(5680));const o={sidebar_position:320},u="Remove unused packages (Vacuum)",i={unversionedId:"guides/vacuum",id:"guides/vacuum",title:"Remove unused packages (Vacuum)",description:"See also Uninstall packages",source:"@site/docs/guides/vacuum.md",sourceDirName:"guides",slug:"/guides/vacuum",permalink:"/docs/guides/vacuum",draft:!1,editUrl:"https://github.com/aquaproj/aquaproj.github.io/edit/main/docs/guides/vacuum.md",tags:[],version:"current",sidebarPosition:320,frontMatter:{sidebar_position:320},sidebar:"tutorialSidebar",previous:{title:"Command Aliases",permalink:"/docs/guides/command-alias"},next:{title:"Install private packages",permalink:"/docs/guides/private-package"}},s={},c=[],l={toc:c},p="wrapper";function m({components:e,...a}){return(0,r.yg)(p,(0,t.A)({},l,a,{components:e,mdxType:"MDXLayout"}),(0,r.yg)("h1",{id:"remove-unused-packages-vacuum"},"Remove unused packages (Vacuum)"),(0,r.yg)("admonition",{type:"info"},(0,r.yg)("p",{parentName:"admonition"},"See also ",(0,r.yg)("a",{parentName:"p",href:"/docs/guides/uninstall-packages"},"Uninstall packages"))),(0,r.yg)("p",null,(0,r.yg)("a",{parentName:"p",href:"https://github.com/aquaproj/aqua/releases/tag/v2.43.0"},"v2.43.0")," ",(0,r.yg)("a",{parentName:"p",href:"https://github.com/aquaproj/aqua/pull/3467"},"#3467")),(0,r.yg)("p",null,"You can remove unused packages by ",(0,r.yg)("inlineCode",{parentName:"p"},"aqua vacuum")," command, which is useful to save storage and keep your machine clean."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-sh"},"aqua vacuum\n")),(0,r.yg)("p",null,"This command removes installed packages which haven't been used for over the expiration days.\nThe default expiration days is 60, but you can change it by the environment variable ",(0,r.yg)("inlineCode",{parentName:"p"},"$AQUA_VACUUM_DAYS")," or the command line option ",(0,r.yg)("inlineCode",{parentName:"p"},"aqua vacuum -days <expiration days>"),"."),(0,r.yg)("p",null,"e.g."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-sh"},"export AQUA_VACUUM_DAYS=90\n")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-sh"},"aqua vacuum -d 30\n")),(0,r.yg)("admonition",{type:"info"},(0,r.yg)("p",{parentName:"admonition"},"aqua vacuum command doesn't remove links from the bin directory and doesn't remove packages from aqua.yaml")),(0,r.yg)("p",null,"As of aqua v2.43.0, aqua records packages' last used date times.\nDate times are updated when packages are installed or executed.\nPackages installed by aqua v2.42.2 or older don't have records of last used date times, so aqua can't remove them.\nTo solve the problem, ",(0,r.yg)("inlineCode",{parentName:"p"},"aqua vacuum --init")," is available."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-sh"},"aqua vacuum --init\n")),(0,r.yg)("p",null,(0,r.yg)("inlineCode",{parentName:"p"},"aqua vacuum --init")," searches installed packages from aqua.yaml including ",(0,r.yg)("inlineCode",{parentName:"p"},"$AQUA_GLOBAL_CONFIG")," and records the current date time as the last used date time of those packages if their last used date times aren't recorded."),(0,r.yg)("p",null,(0,r.yg)("inlineCode",{parentName:"p"},"aqua vacuum --init")," can't record date times of install packages which are not found in aqua.yaml.\nIf you want to record their date times, you need to remove them by ",(0,r.yg)("inlineCode",{parentName:"p"},"aqua rm")," command and re-install them."))}m.isMDXComponent=!0},5680:(e,a,n)=>{n.d(a,{xA:()=>l,yg:()=>g});var t=n(6540);function r(e,a,n){return a in e?Object.defineProperty(e,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[a]=n,e}function o(e,a){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);a&&(t=t.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,t)}return n}function u(e){for(var a=1;a<arguments.length;a++){var n=null!=arguments[a]?arguments[a]:{};a%2?o(Object(n),!0).forEach(function(a){r(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function i(e,a){if(null==e)return{};var n,t,r=function(e,a){if(null==e)return{};var n,t,r={},o=Object.keys(e);for(t=0;t<o.length;t++)n=o[t],a.indexOf(n)>=0||(r[n]=e[n]);return r}(e,a);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(t=0;t<o.length;t++)n=o[t],a.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=t.createContext({}),c=function(e){var a=t.useContext(s),n=a;return e&&(n="function"==typeof e?e(a):u(u({},a),e)),n},l=function(e){var a=c(e.components);return t.createElement(s.Provider,{value:a},e.children)},p="mdxType",m={inlineCode:"code",wrapper:function(e){var a=e.children;return t.createElement(t.Fragment,{},a)}},d=t.forwardRef(function(e,a){var n=e.components,r=e.mdxType,o=e.originalType,s=e.parentName,l=i(e,["components","mdxType","originalType","parentName"]),p=c(n),d=r,g=p["".concat(s,".").concat(d)]||p[d]||m[d]||o;return n?t.createElement(g,u(u({ref:a},l),{},{components:n})):t.createElement(g,u({ref:a},l))});function g(e,a){var n=arguments,r=a&&a.mdxType;if("string"==typeof e||r){var o=n.length,u=new Array(o);u[0]=d;var i={};for(var s in a)hasOwnProperty.call(a,s)&&(i[s]=a[s]);i.originalType=e,i[p]="string"==typeof e?e:r,u[1]=i;for(var c=2;c<o;c++)u[c]=n[c];return t.createElement.apply(null,u)}return t.createElement.apply(null,n)}d.displayName="MDXCreateElement"}}]);