"use strict";(self.webpackChunkaqua_docusaurus=self.webpackChunkaqua_docusaurus||[]).push([[5917],{5680:(e,o,t)=>{t.d(o,{xA:()=>u,yg:()=>m});var r=t(6540);function n(e,o,t){return o in e?Object.defineProperty(e,o,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[o]=t,e}function i(e,o){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);o&&(r=r.filter((function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable}))),t.push.apply(t,r)}return t}function a(e){for(var o=1;o<arguments.length;o++){var t=null!=arguments[o]?arguments[o]:{};o%2?i(Object(t),!0).forEach((function(o){n(e,o,t[o])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(t,o))}))}return e}function c(e,o){if(null==e)return{};var t,r,n=function(e,o){if(null==e)return{};var t,r,n={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],o.indexOf(t)>=0||(n[t]=e[t]);return n}(e,o);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t=i[r],o.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(n[t]=e[t])}return n}var l=r.createContext({}),s=function(e){var o=r.useContext(l),t=o;return e&&(t="function"==typeof e?e(o):a(a({},o),e)),t},u=function(e){var o=s(e.components);return r.createElement(l.Provider,{value:o},e.children)},p="mdxType",y={inlineCode:"code",wrapper:function(e){var o=e.children;return r.createElement(r.Fragment,{},o)}},d=r.forwardRef((function(e,o){var t=e.components,n=e.mdxType,i=e.originalType,l=e.parentName,u=c(e,["components","mdxType","originalType","parentName"]),p=s(t),d=n,m=p["".concat(l,".").concat(d)]||p[d]||y[d]||i;return t?r.createElement(m,a(a({ref:o},u),{},{components:t})):r.createElement(m,a({ref:o},u))}));function m(e,o){var t=arguments,n=o&&o.mdxType;if("string"==typeof e||n){var i=t.length,a=new Array(i);a[0]=d;var c={};for(var l in o)hasOwnProperty.call(o,l)&&(c[l]=o[l]);c.originalType=e,c[p]="string"==typeof e?e:n,a[1]=c;for(var s=2;s<i;s++)a[s]=t[s];return r.createElement.apply(null,a)}return r.createElement.apply(null,t)}d.displayName="MDXCreateElement"},185:(e,o,t)=>{t.r(o),t.d(o,{assets:()=>l,contentTitle:()=>a,default:()=>y,frontMatter:()=>i,metadata:()=>c,toc:()=>s});var r=t(8168),n=(t(6540),t(5680));const i={sidebar_position:200},a="Why is Policy needed?",c={unversionedId:"reference/security/policy-as-code/why-policy-is-needed",id:"reference/security/policy-as-code/why-policy-is-needed",title:"Why is Policy needed?",description:"Protect your development environment and CI from threat",source:"@site/docs/reference/security/policy-as-code/why-policy-is-needed.md",sourceDirName:"reference/security/policy-as-code",slug:"/reference/security/policy-as-code/why-policy-is-needed",permalink:"/docs/reference/security/policy-as-code/why-policy-is-needed",draft:!1,editUrl:"https://github.com/aquaproj/aquaproj.github.io/edit/main/docs/reference/security/policy-as-code/why-policy-is-needed.md",tags:[],version:"current",sidebarPosition:200,frontMatter:{sidebar_position:200},sidebar:"tutorialSidebar",previous:{title:"Git Repository root's policy file and policy commands",permalink:"/docs/reference/security/policy-as-code/git-policy"},next:{title:"Cosign and SLSA Provenance",permalink:"/docs/reference/security/cosign-slsa"}},l={},s=[{value:"Protect your development environment and CI from threat",id:"protect-your-development-environment-and-ci-from-threat",level:2},{value:"Reduce the burden of code review keeping the security",id:"reduce-the-burden-of-code-review-keeping-the-security",level:2},{value:"In case of Monorepo",id:"in-case-of-monorepo",level:2}],u={toc:s},p="wrapper";function y(e){let{components:o,...t}=e;return(0,n.yg)(p,(0,r.A)({},u,t,{components:o,mdxType:"MDXLayout"}),(0,n.yg)("h1",{id:"why-is-policy-needed"},"Why is Policy needed?"),(0,n.yg)("h2",{id:"protect-your-development-environment-and-ci-from-threat"},"Protect your development environment and CI from threat"),(0,n.yg)("p",null,"The main purpose of Policy is to improve the security by preventing malicious tools from being executed.\n",(0,n.yg)("inlineCode",{parentName:"p"},"local")," Registry and ",(0,n.yg)("inlineCode",{parentName:"p"},"github_content")," Registry are useful, but they can also be abused. From aqua v2, aqua forbids non Standard Registries by default because almost all users don't need them."),(0,n.yg)("h2",{id:"reduce-the-burden-of-code-review-keeping-the-security"},"Reduce the burden of code review keeping the security"),(0,n.yg)("p",null,"Policy as Code reduces the burden of the code review and improves the security."),(0,n.yg)("p",null,"About Policy as Code, please see the document of Sentinel by Hashicorp."),(0,n.yg)("p",null,(0,n.yg)("a",{parentName:"p",href:"https://docs.hashicorp.com/sentinel/concepts/policy-as-code"},"https://docs.hashicorp.com/sentinel/concepts/policy-as-code")),(0,n.yg)("p",null,"Policy works as guardrail and allows you to update ",(0,n.yg)("inlineCode",{parentName:"p"},"aqua.yaml")," freely unless ",(0,n.yg)("inlineCode",{parentName:"p"},"aqua.yaml")," violates Policy.\nEspecially, this is useful to automerge pull requests by Renovate safely."),(0,n.yg)("p",null,"If the code review is required to update ",(0,n.yg)("inlineCode",{parentName:"p"},"aqua.yaml"),",\nthe burden of the code review would increase in proportion to the frequency of pull requests.\nDevelopers get tired of reviewing, reviews become messy, and problems are more likely to be overlooked.\nIf Policy allows you to accept the change of aqua.yaml without review, the burden would be resolved.\nEven if the code review is still required, developers don't have to check points reviewed by Policy."),(0,n.yg)("h2",{id:"in-case-of-monorepo"},"In case of Monorepo"),(0,n.yg)("p",null,"If you manage many ",(0,n.yg)("inlineCode",{parentName:"p"},"aqua.yaml")," in Monorepo,\nyou have to check if all of them have no problem in terms of security.\nA policy file is independent of ",(0,n.yg)("inlineCode",{parentName:"p"},"aqua.yaml"),", so you can use the same policy file for multiple ",(0,n.yg)("inlineCode",{parentName:"p"},"aqua.yaml"),".\nA security team can manage a policy file, while product teams can manage ",(0,n.yg)("inlineCode",{parentName:"p"},"aqua.yaml"),"."),(0,n.yg)("p",null,"For example, ",(0,n.yg)("a",{parentName:"p",href:"https://suzuki-shunsuke.github.io/tfaction/docs/"},"tfaction"),", which is GitHub Actions Workflows for Terraform Monorepo, assumes that tools such as Terraform, tfsec, and tflint are managed per working directory.\nThis is useful to update tools per working directory gradually, but it is difficult for a team such security team or SRE team to review all ",(0,n.yg)("inlineCode",{parentName:"p"},"aqua.yaml")," in a large Monorepo.\nSo you have to leave the management of ",(0,n.yg)("inlineCode",{parentName:"p"},"aqua.yaml")," to each teams, but you also have to keep the governance and security."),(0,n.yg)("p",null,"Policy file is useful for it."))}y.isMDXComponent=!0}}]);