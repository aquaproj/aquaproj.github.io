"use strict";(globalThis.webpackChunkaqua_docusaurus=globalThis.webpackChunkaqua_docusaurus||[]).push([[5593],{5680(e,t,r){r.d(t,{xA:()=>g,yg:()=>c});var a=r(6540);function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach(function(t){n(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function s(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var l=a.createContext({}),u=function(e){var t=a.useContext(l),r=t;return e&&(r="function"==typeof e?e(t):o(o({},t),e)),r},g=function(e){var t=u(e.components);return a.createElement(l.Provider,{value:t},e.children)},y={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},p=a.forwardRef(function(e,t){var r=e.components,n=e.mdxType,i=e.originalType,l=e.parentName,g=s(e,["components","mdxType","originalType","parentName"]),p=u(r),c=n,d=p["".concat(l,".").concat(c)]||p[c]||y[c]||i;return r?a.createElement(d,o(o({ref:t},g),{},{components:r})):a.createElement(d,o({ref:t},g))});function c(e,t){var r=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var i=r.length,o=new Array(i);o[0]=p;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:n,o[1]=s;for(var u=2;u<i;u++)o[u]=r[u];return a.createElement.apply(null,o)}return a.createElement.apply(null,r)}p.displayName="MDXCreateElement"},948(e,t,r){r.r(t),r.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>y,frontMatter:()=>i,metadata:()=>s,toc:()=>u});var a=r(8168),n=(r(6540),r(5680));const i={},o="Develop a Registry",s={unversionedId:"develop-registry/index",id:"develop-registry/index",title:"Develop a Registry",description:"You can install tools registered in the Standard Registry easily.",source:"@site/docs/develop-registry/index.md",sourceDirName:"develop-registry",slug:"/develop-registry/",permalink:"/docs/develop-registry/",draft:!1,editUrl:"https://github.com/aquaproj/aquaproj.github.io/edit/main/docs/develop-registry/index.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Wrap aqua with task runner such as GNU Make",permalink:"/docs/guides/wrap-aqua-with-task-runner"},next:{title:"Registry Style Guide",permalink:"/docs/develop-registry/registry-style-guide"}},l={},u=[{value:"Scaffold Registry Configuration",id:"scaffold-registry-configuration",level:2},{value:"Allow private Registries by Policy",id:"allow-private-registries-by-policy",level:2},{value:"Use as a local Registry",id:"use-as-a-local-registry",level:2},{value:"Use as a github_content Registry",id:"use-as-a-github_content-registry",level:2}],g={toc:u};function y({components:e,...t}){return(0,n.yg)("wrapper",(0,a.A)({},g,t,{components:e,mdxType:"MDXLayout"}),(0,n.yg)("h1",{id:"develop-a-registry"},"Develop a Registry"),(0,n.yg)("p",null,"You can install tools registered in the ",(0,n.yg)("a",{parentName:"p",href:"/docs/products/aqua-registry"},"Standard Registry")," easily.\nYou can search packages from Registries by ",(0,n.yg)("inlineCode",{parentName:"p"},"aqua g"),".\nPlease see ",(0,n.yg)("a",{parentName:"p",href:"/docs/tutorial/search-packages"},"Search Packages"),"."),(0,n.yg)("p",null,"If tools aren't found, please ",(0,n.yg)("a",{parentName:"p",href:"/docs/products/aqua-registry/contributing"},"send a pull request to Standard Registry"),".\nIt is okay only to ",(0,n.yg)("a",{parentName:"p",href:"https://github.com/aquaproj/aqua-registry/issues"},"create an Issue")," if it is difficult to send a pull request."),(0,n.yg)("p",null,"If tools are not private Repositories, we recommend sending a pull request to Standard Registry rather than maintaining them in your custom Registries, because"),(0,n.yg)("ul",null,(0,n.yg)("li",{parentName:"ul"},"You can get the support from maintainers"),(0,n.yg)("li",{parentName:"ul"},"You don't have to maintain Registry yourself"),(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("a",{parentName:"li",href:"/docs/reference/upgrade-guide/v2/only-standard-registry-is-allowed-by-default/"},"From aqua v2, you have to allow non Standard Registry explicitly for security"),", but this is a bit bothersome")),(0,n.yg)("p",null,"If tools are hosted in private repositories, please create custom Registries."),(0,n.yg)("h2",{id:"scaffold-registry-configuration"},"Scaffold Registry Configuration"),(0,n.yg)("p",null,"You can scaffold Registry Configuration by ",(0,n.yg)("inlineCode",{parentName:"p"},"aqua gr")," command."),(0,n.yg)("p",null,"e.g."),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-sh"},"aqua gr suzuki-shunsuke/ghalint > registry.yaml\n")),(0,n.yg)("p",null,"By default, ",(0,n.yg)("inlineCode",{parentName:"p"},"aqua gr")," generates Registry Configuration supporting all versions including old versions.\nBut if you only have to support only the latest version, you can set the option ",(0,n.yg)("inlineCode",{parentName:"p"},"-l 1"),"."),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-sh"},"aqua gr -l 1 suzuki-shunsuke/ghalint\n")),(0,n.yg)("p",null,(0,n.yg)("inlineCode",{parentName:"p"},"aqua gr")," command is inperfect, so sometimes you have to modify generated configuration yourself, but it's much easier than writing configuration from scratch."),(0,n.yg)("p",null,"If the command name is different from the package's repository name, you should set ",(0,n.yg)("inlineCode",{parentName:"p"},"-cmd")," option."),(0,n.yg)("p",null,"e.g."),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-sh"},"aqua gr -cmd gh cli/cli\n")),(0,n.yg)("p",null,"You can use generated configuration as a local Registry or a github_content Registry."),(0,n.yg)("h2",{id:"allow-private-registries-by-policy"},"Allow private Registries by Policy"),(0,n.yg)("p",null,"By default, aqua allows us to use only ",(0,n.yg)("a",{parentName:"p",href:"https://github.com/aquaproj/aqua-registry"},"Standard Registry")," for security.\nTo use private Registries, you have to allow them by ",(0,n.yg)("a",{parentName:"p",href:"/docs/guides/policy-as-code"},"Policy"),"."),(0,n.yg)("h2",{id:"use-as-a-local-registry"},"Use as a local Registry"),(0,n.yg)("p",null,"aqua.yaml"),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-yaml"},"registries:\n  - name: foo\n    type: local\n    path: registry.yaml # Relative path from aqua.yaml\n\npackages:\n  - name: suzuki-shunsuke/tfcmt@v3.2.4\n    registry: foo\n")),(0,n.yg)("h2",{id:"use-as-a-github_content-registry"},"Use as a github_content Registry"),(0,n.yg)("p",null,"Add a Registry file to a GitHub Repository and push a tag for versioning.\nThen you can use it as a github_content Registry."),(0,n.yg)("p",null,"aqua.yaml"),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-yaml"},"registries:\n  - name: foo\n    type: github_content\n    repo_owner: suzuki-shunsuke\n    repo_name: private-aqua-registry\n    ref: v0.1.0\n    path: registry.yaml\n\npackages:\n  - name: suzuki-shunsuke/tfcmt@v3.2.4\n    registry: foo\n")),(0,n.yg)("p",null,"If the Registry is private, you have to set a GitHub Access Token to the environment variable ",(0,n.yg)("inlineCode",{parentName:"p"},"AQUA_GITHUB_TOKEN")," or ",(0,n.yg)("inlineCode",{parentName:"p"},"GITHUB_TOKEN"),"."))}y.isMDXComponent=!0}}]);