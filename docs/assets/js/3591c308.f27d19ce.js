"use strict";(self.webpackChunkaqua_docusaurus=self.webpackChunkaqua_docusaurus||[]).push([[6927],{5680:(e,a,o)=>{o.d(a,{xA:()=>p,yg:()=>g});var i=o(6540);function t(e,a,o){return a in e?Object.defineProperty(e,a,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[a]=o,e}function n(e,a){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);a&&(i=i.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),o.push.apply(o,i)}return o}function r(e){for(var a=1;a<arguments.length;a++){var o=null!=arguments[a]?arguments[a]:{};a%2?n(Object(o),!0).forEach((function(a){t(e,a,o[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):n(Object(o)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(o,a))}))}return e}function l(e,a){if(null==e)return{};var o,i,t=function(e,a){if(null==e)return{};var o,i,t={},n=Object.keys(e);for(i=0;i<n.length;i++)o=n[i],a.indexOf(o)>=0||(t[o]=e[o]);return t}(e,a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(i=0;i<n.length;i++)o=n[i],a.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(t[o]=e[o])}return t}var c=i.createContext({}),s=function(e){var a=i.useContext(c),o=a;return e&&(o="function"==typeof e?e(a):r(r({},a),e)),o},p=function(e){var a=s(e.components);return i.createElement(c.Provider,{value:a},e.children)},y="mdxType",u={inlineCode:"code",wrapper:function(e){var a=e.children;return i.createElement(i.Fragment,{},a)}},d=i.forwardRef((function(e,a){var o=e.components,t=e.mdxType,n=e.originalType,c=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),y=s(o),d=t,g=y["".concat(c,".").concat(d)]||y[d]||u[d]||n;return o?i.createElement(g,r(r({ref:a},p),{},{components:o})):i.createElement(g,r({ref:a},p))}));function g(e,a){var o=arguments,t=a&&a.mdxType;if("string"==typeof e||t){var n=o.length,r=new Array(n);r[0]=d;var l={};for(var c in a)hasOwnProperty.call(a,c)&&(l[c]=a[c]);l.originalType=e,l[y]="string"==typeof e?e:t,r[1]=l;for(var s=2;s<n;s++)r[s]=o[s];return i.createElement.apply(null,r)}return i.createElement.apply(null,o)}d.displayName="MDXCreateElement"},7825:(e,a,o)=>{o.r(a),o.d(a,{assets:()=>c,contentTitle:()=>r,default:()=>u,frontMatter:()=>n,metadata:()=>l,toc:()=>s});var i=o(8168),t=(o(6540),o(5680));const n={sidebar_position:80},r="Policy as Code",l={unversionedId:"reference/security/policy-as-code/index",id:"reference/security/policy-as-code/index",title:"Policy as Code",description:"aqua >= v1.24.0",source:"@site/docs/reference/security/policy-as-code/index.md",sourceDirName:"reference/security/policy-as-code",slug:"/reference/security/policy-as-code/",permalink:"/docs/reference/security/policy-as-code/",draft:!1,editUrl:"https://github.com/aquaproj/aquaproj.github.io/edit/main/docs/reference/security/policy-as-code/index.md",tags:[],version:"current",sidebarPosition:80,frontMatter:{sidebar_position:80},sidebar:"tutorialSidebar",previous:{title:"Checksum Verification",permalink:"/docs/reference/security/checksum"},next:{title:"Git Repository root's policy file and policy commands",permalink:"/docs/reference/security/policy-as-code/git-policy"}},c={},s=[{value:"Change Logs",id:"change-logs",level:2},{value:"JSON Schema",id:"json-schema",level:2},{value:"Disable Policy",id:"disable-policy",level:2},{value:"Policy Types",id:"policy-types",level:2},{value:"AQUA_POLICY_CONFIG",id:"aqua_policy_config",level:2}],p={toc:s},y="wrapper";function u({components:e,...a}){return(0,t.yg)(y,(0,i.A)({},p,a,{components:e,mdxType:"MDXLayout"}),(0,t.yg)("h1",{id:"policy-as-code"},"Policy as Code"),(0,t.yg)("p",null,(0,t.yg)("inlineCode",{parentName:"p"},"aqua >= v1.24.0")),(0,t.yg)("p",null,(0,t.yg)("a",{parentName:"p",href:"https://github.com/aquaproj/aqua/issues/1306"},"#1306")),(0,t.yg)("p",null,"See also."),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("a",{parentName:"li",href:"/docs/guides/policy-as-code"},"Guides > Policy as Code")),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("a",{parentName:"li",href:"/docs/reference/security/policy-as-code/why-policy-is-needed"},"Why is Policy needed?")),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("a",{parentName:"li",href:"/docs/reference/security/policy-as-code/git-policy"},"Git Repository root's policy file and policy commands"))),(0,t.yg)("h2",{id:"change-logs"},"Change Logs"),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},"v2.3.0: Support ",(0,t.yg)("inlineCode",{parentName:"li"},"Git Repository root's policy file")," and policy commands"),(0,t.yg)("li",{parentName:"ul"},"v2.1.0: Support ",(0,t.yg)("inlineCode",{parentName:"li"},"AQUA_DISABLE_POLICY")),(0,t.yg)("li",{parentName:"ul"},"v2.0.0: aqua allows only Standard Registry by default"),(0,t.yg)("li",{parentName:"ul"},"v1.24.0: Introduce Policy")),(0,t.yg)("h2",{id:"json-schema"},"JSON Schema"),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("a",{parentName:"li",href:"https://github.com/aquaproj/aqua/blob/main/json-schema/policy.json"},"https://github.com/aquaproj/aqua/blob/main/json-schema/policy.json")),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("a",{parentName:"li",href:"https://raw.githubusercontent.com/aquaproj/aqua/main/json-schema/policy.json"},"https://raw.githubusercontent.com/aquaproj/aqua/main/json-schema/policy.json"))),(0,t.yg)("h2",{id:"disable-policy"},"Disable Policy"),(0,t.yg)("p",null,"aqua >= v2.1.0 ",(0,t.yg)("a",{parentName:"p",href:"https://github.com/aquaproj/aqua/issues/1790"},"#1790")),(0,t.yg)("admonition",{type:"caution"},(0,t.yg)("p",{parentName:"admonition"},"We don't recommend this feature basically because Policy is important in terms of security.\nThis feature is introduced to enable users using non Standard Registries to upgrade aqua to v2 easily.\nYou shouldn't use this feature in CI.")),(0,t.yg)("p",null,"If ",(0,t.yg)("inlineCode",{parentName:"p"},"AQUA_DISABLE_POLICY")," is ",(0,t.yg)("inlineCode",{parentName:"p"},"true"),", Policy is disabled and every Registry and Package are available."),(0,t.yg)("h2",{id:"policy-types"},"Policy Types"),(0,t.yg)("p",null,"There are two types of Policies"),(0,t.yg)("ol",null,(0,t.yg)("li",{parentName:"ol"},(0,t.yg)("a",{parentName:"li",href:"/docs/reference/security/policy-as-code/git-policy"},"Git Repository root's policy file")),(0,t.yg)("li",{parentName:"ol"},(0,t.yg)("a",{parentName:"li",href:"#aqua_policy_config"},"AQUA_POLICY_CONFIG"))),(0,t.yg)("p",null,"We recommend ",(0,t.yg)("inlineCode",{parentName:"p"},"Git Repository root's policy file")," instead of ",(0,t.yg)("inlineCode",{parentName:"p"},"AQUA_POLICY_CONFIG"),".\n",(0,t.yg)("inlineCode",{parentName:"p"},"Git Repository root's policy file")," was introduced to solve the issue of ",(0,t.yg)("inlineCode",{parentName:"p"},"AQUA_POLICY_CONFIG"),".\nPlease see ",(0,t.yg)("a",{parentName:"p",href:"/docs/reference/security/policy-as-code/git-policy#why-this-feature-is-needed"},"Why is ",(0,t.yg)("inlineCode",{parentName:"a"},"Git Repository root's policy file")," needed"),"."),(0,t.yg)("h2",{id:"aqua_policy_config"},"AQUA_POLICY_CONFIG"),(0,t.yg)("p",null,"You can specify Policy file paths by the environment variable ",(0,t.yg)("inlineCode",{parentName:"p"},"AQUA_POLICY_CONFIG"),"."),(0,t.yg)("p",null,"e.g."),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-sh"},"export AQUA_POLICY_CONFIG=$PWD/aqua-policy.yaml:$AQUA_POLICY_CONFIG\n")),(0,t.yg)("p",null,"Unlike ",(0,t.yg)("inlineCode",{parentName:"p"},"Git Repository root's policy file"),", you don't have to run ",(0,t.yg)("inlineCode",{parentName:"p"},"aqua policy allow")," command to allow Policy files."))}u.isMDXComponent=!0}}]);