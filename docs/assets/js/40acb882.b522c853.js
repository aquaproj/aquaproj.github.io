"use strict";(self.webpackChunkaqua_docusaurus=self.webpackChunkaqua_docusaurus||[]).push([[8091],{5680:(e,a,n)=>{n.d(a,{xA:()=>c,yg:()=>m});var t=n(6540);function r(e,a,n){return a in e?Object.defineProperty(e,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[a]=n,e}function i(e,a){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);a&&(t=t.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),n.push.apply(n,t)}return n}function o(e){for(var a=1;a<arguments.length;a++){var n=null!=arguments[a]?arguments[a]:{};a%2?i(Object(n),!0).forEach((function(a){r(e,a,n[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))}))}return e}function l(e,a){if(null==e)return{};var n,t,r=function(e,a){if(null==e)return{};var n,t,r={},i=Object.keys(e);for(t=0;t<i.length;t++)n=i[t],a.indexOf(n)>=0||(r[n]=e[n]);return r}(e,a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(t=0;t<i.length;t++)n=i[t],a.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=t.createContext({}),u=function(e){var a=t.useContext(s),n=a;return e&&(n="function"==typeof e?e(a):o(o({},a),e)),n},c=function(e){var a=u(e.components);return t.createElement(s.Provider,{value:a},e.children)},g="mdxType",p={inlineCode:"code",wrapper:function(e){var a=e.children;return t.createElement(t.Fragment,{},a)}},d=t.forwardRef((function(e,a){var n=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),g=u(n),d=r,m=g["".concat(s,".").concat(d)]||g[d]||p[d]||i;return n?t.createElement(m,o(o({ref:a},c),{},{components:n})):t.createElement(m,o({ref:a},c))}));function m(e,a){var n=arguments,r=a&&a.mdxType;if("string"==typeof e||r){var i=n.length,o=new Array(i);o[0]=d;var l={};for(var s in a)hasOwnProperty.call(a,s)&&(l[s]=a[s]);l.originalType=e,l[g]="string"==typeof e?e:r,o[1]=l;for(var u=2;u<i;u++)o[u]=n[u];return t.createElement.apply(null,o)}return t.createElement.apply(null,n)}d.displayName="MDXCreateElement"},7339:(e,a,n)=>{n.r(a),n.d(a,{assets:()=>s,contentTitle:()=>o,default:()=>p,frontMatter:()=>i,metadata:()=>l,toc:()=>u});var t=n(8168),r=(n(6540),n(5680));const i={sidebar_position:700},o="Trouble Shooting",l={unversionedId:"trouble-shooting",id:"trouble-shooting",title:"Trouble Shooting",description:"Use the latest aqua and aqua-registry",source:"@site/docs/trouble-shooting.md",sourceDirName:".",slug:"/trouble-shooting",permalink:"/docs/trouble-shooting",draft:!1,editUrl:"https://github.com/aquaproj/aquaproj.github.io/edit/main/docs/trouble-shooting.md",tags:[],version:"current",sidebarPosition:700,frontMatter:{sidebar_position:700},sidebar:"tutorialSidebar",previous:{title:"install: Deprecate --test option and change the default behaviour same as one with --test option",permalink:"/docs/reference/upgrade-guide/v2/deprecate-install-test-option"},next:{title:"FAQ",permalink:"/docs/faq"}},s={},u=[{value:"Use the latest aqua and aqua-registry",id:"use-the-latest-aqua-and-aqua-registry",level:2},{value:"Set AQUA_LOG_LEVEL=debug",id:"set-aqua_log_leveldebug",level:2},{value:"Tracing and CPU Profiling",id:"tracing-and-cpu-profiling",level:2},{value:"check file_src is correct",id:"check-file_src-is-correct",level:2},{value:"the asset isn&#39;t found",id:"the-asset-isnt-found",level:2},{value:"GitHub API Rate Limit, 403 error",id:"github-api-rate-limit-403-error",level:2},{value:"Packages aren&#39;t installed",id:"packages-arent-installed",level:2},{value:"Command is not found",id:"command-is-not-found",level:2},{value:"The tool X doesn&#39;t work well",id:"the-tool-x-doesnt-work-well",level:2}],c={toc:u},g="wrapper";function p(e){let{components:a,...n}=e;return(0,r.yg)(g,(0,t.A)({},c,n,{components:a,mdxType:"MDXLayout"}),(0,r.yg)("h1",{id:"trouble-shooting"},"Trouble Shooting"),(0,r.yg)("h2",{id:"use-the-latest-aqua-and-aqua-registry"},"Use the latest aqua and aqua-registry"),(0,r.yg)("p",null,"If aqua and aqua-registry are old, please update them."),(0,r.yg)("h2",{id:"set-aqua_log_leveldebug"},"Set AQUA_LOG_LEVEL=debug"),(0,r.yg)("p",null,"When aqua doesn't work, the environment variable ",(0,r.yg)("inlineCode",{parentName:"p"},"AQUA_LOG_LEVEL")," is helpful for the debug."),(0,r.yg)("p",null,"For example,"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-console"},'$ AQUA_LOG_LEVEL=debug kind --help\nDEBU[0000] CLI args                                      config= log_level=debug program=aqua\nDEBU[0000] install the package                           package_name=kubernetes-sigs/kind package_version=v0.11.1 program=aqua registry=standard\nDEBU[0000] check if the package is already installed     package_name=kubernetes-sigs/kind package_version=v0.11.1 program=aqua registry=standard\nDEBU[0000] check the permission                          file_name=kind\nDEBU[0000] execute the command                           exe_path=/Users/shunsuke-suzuki/.aqua/pkgs/http/kind.sigs.k8s.io/dl/v0.11.1/kind-darwin-amd64/kind-darwin-amd64 program=aqua\nDEBU[0000] command was executed but it failed            error="fork/exec /Users/shunsuke-suzuki/.aqua/pkgs/http/kind.sigs.k8s.io/dl/v0.11.1/kind-darwin-amd64/kind-darwin-amd64: exec format error" exe_path=/Users/shunsuke-suzuki/.aqua/pkgs/http/kind.sigs.k8s.io/dl/v0.11.1/kind-darwin-amd64/kind-darwin-amd64 exit_code=-1 program=aqua\nDEBU[0000] command failed                                error="fork/exec /Users/shunsuke-suzuki/.aqua/pkgs/http/kind.sigs.k8s.io/dl/v0.11.1/kind-darwin-amd64/kind-darwin-amd64: exec format error" exit_code=-1 program=aqua\n')),(0,r.yg)("p",null,"In the above case, kind is already installed but the ",(0,r.yg)("inlineCode",{parentName:"p"},"exec format error")," occurred. I reinstalled kind then the problem has been solved."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-console"},"# uninstall kind\n$ rm -R /Users/shunsuke-suzuki/.aqua/pkgs/http/kind.sigs.k8s.io/dl/v0.11.1/kind-darwin-amd64\n# kind is reinstalled by Lazy Install\n$ kind --help\n")),(0,r.yg)("h2",{id:"tracing-and-cpu-profiling"},"Tracing and CPU Profiling"),(0,r.yg)("p",null,"If you encounter any performance issue, please see ",(0,r.yg)("a",{parentName:"p",href:"/docs/reference/config/trace-profile"},"Tracing and CPU Profiling"),"."),(0,r.yg)("h2",{id:"check-file_src-is-correct"},"check file_src is correct"),(0,r.yg)("p",null,"If aqua outputs the warning or error ",(0,r.yg)("inlineCode",{parentName:"p"},"check file_src is correct"),",\nthis means that the asset was downloaded and unarchived but the executable file wasn't found.\nProbably this is the problem of the Registry, so please update the Registry."),(0,r.yg)("p",null,"e.g."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-console"},'$ aqua i\nWARN[0000] check file_src is correct                     aqua_version=1.15.1 env=darwin/arm64 error="exe_path isn\'t found: stat /Users/shunsukesuzuki/.local/share/aquaproj-aqua/pkgs/github_release/github.com/neovim/neovim/v0.7.2/nvim-macos.tar.gz/nvim-osx64/bin/nvim: no such file or directory" exe_path=/Users/shunsukesuzuki/.local/share/aquaproj-aqua/pkgs/github_release/github.com/neovim/neovim/v0.7.2/nvim-macos.tar.gz/nvim-osx64/bin/nvim file_name=nvim package=neovim/neovim package_name=neovim/neovim package_version=v0.7.2 program=aqua registry=standard\n')),(0,r.yg)("p",null,"In this case, the file ",(0,r.yg)("inlineCode",{parentName:"p"},"/Users/shunsukesuzuki/.local/share/aquaproj-aqua/pkgs/github_release/github.com/neovim/neovim/v0.7.2/nvim-macos.tar.gz/nvim-osx64/bin/nvim")," wasn't found."),(0,r.yg)("p",null,"Please check the correct path."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-console"},"$ ls /Users/shunsukesuzuki/.local/share/aquaproj-aqua/pkgs/github_release/github.com/neovim/neovim/v0.7.2/nvim-macos.tar.gz\nnvim-macos\n")),(0,r.yg)("p",null,"The directory name was not ",(0,r.yg)("inlineCode",{parentName:"p"},"nvim-osx")," but ",(0,r.yg)("inlineCode",{parentName:"p"},"nvim-macos"),"."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-console"},"$ ls /Users/shunsukesuzuki/.local/share/aquaproj-aqua/pkgs/github_release/github.com/neovim/neovim/v0.7.2/nvim-macos.tar.gz/nvim-macos/bin \nnvim\n")),(0,r.yg)("p",null,"So we fixed the Standard Registry."),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("a",{parentName:"li",href:"https://github.com/aquaproj/aqua/issues/970#issuecomment-1171726476"},"https://github.com/aquaproj/aqua/issues/970#issuecomment-1171726476")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("a",{parentName:"li",href:"https://github.com/aquaproj/aqua-registry/pull/4419"},"https://github.com/aquaproj/aqua-registry/pull/4419"))),(0,r.yg)("h2",{id:"the-asset-isnt-found"},"the asset isn't found"),(0,r.yg)("p",null,"If aqua outputs the error ",(0,r.yg)("inlineCode",{parentName:"p"},"the asset isn't found"),", the following are possible causes."),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"The release doesn't exist",(0,r.yg)("ul",{parentName:"li"},(0,r.yg)("li",{parentName:"ul"},"Please fix the version"))),(0,r.yg)("li",{parentName:"ul"},"GitHub Releases has no assets yet",(0,r.yg)("ul",{parentName:"li"},(0,r.yg)("li",{parentName:"ul"},"Please wait for uploading assets. This isn't a problem of aqua"),(0,r.yg)("li",{parentName:"ul"},"Renovate's ",(0,r.yg)("a",{parentName:"li",href:"https://docs.renovatebot.com/configuration-options/#minimumreleaseage"},"minimumReleaseAge")," may be useful to decrease this kind of issues"))),(0,r.yg)("li",{parentName:"ul"},"Assets for only specific pair of OS and Arch aren't uploaded",(0,r.yg)("ul",{parentName:"li"},(0,r.yg)("li",{parentName:"ul"},"Maybe you can request to release assets to the tool owner"),(0,r.yg)("li",{parentName:"ul"},"e.g. ",(0,r.yg)("a",{parentName:"li",href:"https://github.com/gsamokovarov/jump/issues/72"},"https://github.com/gsamokovarov/jump/issues/72")))),(0,r.yg)("li",{parentName:"ul"},"Asset name format was changed from the specific version",(0,r.yg)("ul",{parentName:"li"},(0,r.yg)("li",{parentName:"ul"},"You have to fix the Registry"),(0,r.yg)("li",{parentName:"ul"},"In case of the Standard Registry, please create an issue or a pull request")))),(0,r.yg)("h2",{id:"github-api-rate-limit-403-error"},"GitHub API Rate Limit, 403 error"),(0,r.yg)("p",null,"Please set GitHub Access Token to the environment variable ",(0,r.yg)("inlineCode",{parentName:"p"},"GITHUB_TOKEN")," or ",(0,r.yg)("inlineCode",{parentName:"p"},"AQUA_GITHUB_TOKEN"),"."),(0,r.yg)("h2",{id:"packages-arent-installed"},"Packages aren't installed"),(0,r.yg)("p",null,"Maybe your OS and Arch isn't supported by the package's ",(0,r.yg)("a",{parentName:"p",href:"/docs/reference/registry-config/supported-envs"},"supported_envs"),".\nPlease check the Registry Configuration."),(0,r.yg)("h2",{id:"command-is-not-found"},"Command is not found"),(0,r.yg)("p",null,"If ",(0,r.yg)("inlineCode",{parentName:"p"},"command -v <command>")," exits with non zero, the following are possible causes."),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"AQUA_ROOT_DIR/bin")," isn't added to the environment variable ",(0,r.yg)("inlineCode",{parentName:"li"},"PATH"),(0,r.yg)("ul",{parentName:"li"},(0,r.yg)("li",{parentName:"ul"},"e.g. ",(0,r.yg)("inlineCode",{parentName:"li"},"$ export PATH=$HOME/.local/share/aquaproj-aqua/bin:$PATH")))),(0,r.yg)("li",{parentName:"ul"},"the symbolic link isn't created in ",(0,r.yg)("inlineCode",{parentName:"li"},"AQUA_ROOT_DIR/bin"),(0,r.yg)("ul",{parentName:"li"},(0,r.yg)("li",{parentName:"ul"},"Please run ",(0,r.yg)("inlineCode",{parentName:"li"},"aqua i -l")))),(0,r.yg)("li",{parentName:"ul"},"the command name is wrong")),(0,r.yg)("p",null,"You can check the package's command names by ",(0,r.yg)("inlineCode",{parentName:"p"},"aqua g")," command.\nFor example, the command name of the package ",(0,r.yg)("inlineCode",{parentName:"p"},"cli/cli")," is ",(0,r.yg)("inlineCode",{parentName:"p"},"gh"),"."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-console"},"$ aqua g\n")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"  docker-slim/docker-slim [docker-slim, docker-slim-sensor]\n  corneliusweig/rakkess/access-matrix [kubectl-access_matrix]\n  CircleCI-Public/circleci-cli [circleci]\n> cli/cli [gh]: github\n  4/660\n> cli/cli\n")),(0,r.yg)("p",null,"If the symbolic link isn't created by ",(0,r.yg)("inlineCode",{parentName:"p"},"aqua i -l"),", the following are possible causes."),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"Your OS and Arch isn't supported by the package's ",(0,r.yg)("a",{parentName:"li",href:"/docs/reference/registry-config/supported-envs"},"supported_envs")),(0,r.yg)("li",{parentName:"ul"},"the package isn't added in configuration files")),(0,r.yg)("p",null,"aqua finds the configuration files and packages according to the rule."),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("a",{parentName:"li",href:"/docs/tutorial/config-path"},"Configuration file path | Tutorial")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("a",{parentName:"li",href:"/docs/reference/config#configuration-file-path"},"Configuration file paths | Reference"))),(0,r.yg)("p",null,"Please check configuration files and your current directory."),(0,r.yg)("p",null,"If ",(0,r.yg)("inlineCode",{parentName:"p"},"command -v <command>")," exits with zero but command can't executed by the error ",(0,r.yg)("inlineCode",{parentName:"p"},'error="command is not found"'),", the following are possible causes."),(0,r.yg)("p",null,"e.g."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-console"},'$ gh version\nFATA[0000] aqua failed                                   aqua_version=1.19.2 error="command is not found" exe_name=gh program=aqua\n')),(0,r.yg)("p",null,"aqua finds the configuration files and packages according to the rule."),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("a",{parentName:"li",href:"/docs/tutorial/config-path"},"Configuration file path | Tutorial")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("a",{parentName:"li",href:"/docs/reference/config#configuration-file-path"},"Configuration file paths | Reference"))),(0,r.yg)("p",null,"Please check configuration files and your current directory."),(0,r.yg)("h2",{id:"the-tool-x-doesnt-work-well"},"The tool X doesn't work well"),(0,r.yg)("p",null,"When the tool X managed by aqua is executed, X is intermediated by aqua-proxy and aqua.\nPlease see ",(0,r.yg)("a",{parentName:"p",href:"/docs/reference/execve-2"},"here")," too.\nDue to this intermediation, there are cases that some tools don't work well."),(0,r.yg)("p",null,"There is a workaround that you can try when you face the issue.\nThe workaround is to execute the tool directly by executing ",(0,r.yg)("inlineCode",{parentName:"p"},"aqua which X")," and getting the absolute path."),(0,r.yg)("p",null,"For example, when we tried ",(0,r.yg)("a",{parentName:"p",href:"https://www.lunarvim.org/"},"LunarVim")," we faced the issue that LunarVim didn't start.\nThe issue occurred as we managed NeoVim with aqua.\nLunarVim executed NeoVim as the following."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-sh"},'# $HOME/.local/bin/lvim\nexec -a "$NVIM_APPNAME" nvim -u "$LUNARVIM_BASE_DIR/init.lua" "$@"\n')),(0,r.yg)("p",null,"To resolve the issue, we replaced ",(0,r.yg)("inlineCode",{parentName:"p"},"nvim")," with ",(0,r.yg)("inlineCode",{parentName:"p"},'"$(aqua which nvim)"')),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-sh"},'# $HOME/.local/bin/lvim\nexec -a "$NVIM_APPNAME" "$(aqua which nvim)" -u "$LUNARVIM_BASE_DIR/init.lua" "$@"\n')),(0,r.yg)("p",null,"Then the issue was solved and we could start LunarVim!"))}p.isMDXComponent=!0}}]);